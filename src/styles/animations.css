/* ============================================
   VIEW TRANSITIONS API
   Used for smooth menu item filtering animations
   ============================================ */

@view-transition {
	navigation: none;
}

/* Disable root/page-level transitions to prevent background flashing */
::view-transition-group(root) {
	animation: none !important;
	display: none;
}

::view-transition-old(root),
::view-transition-new(root) {
	animation: none !important;
	display: none;
}

/* Smooth, natural animations for menu item transitions only */
::view-transition-group(*) {
	animation-duration: var(--transition-slow);
	animation-timing-function: var(--easing-smooth);
	perspective: 1000px;
}

::view-transition-old(*) {
	animation: dramatic-exit 0.4s var(--easing-exit) both;
	transform-origin: center center;
}

::view-transition-new(*) {
	animation: spring-entrance var(--transition-slow) var(--easing-spring) both;
	transform-origin: center center;
}

/* ============================================
   KEYFRAME ANIMATIONS
   ============================================ */

/* Exit animation for menu items being filtered out */
@keyframes dramatic-exit {
	0% {
		opacity: 1;
		transform: scale(1) rotate(0deg);
		filter: blur(0);
	}

	50% {
		transform: scale(0.9) rotate(calc(var(--exit-rotate-mid, -8deg)));
		filter: blur(2px);
	}

	100% {
		opacity: 0;
		transform: scale(0.6) rotate(calc(var(--exit-rotate, -15deg)));
		filter: blur(4px);
	}
}

/* Entrance animation for menu items being filtered in */
@keyframes spring-entrance {
	0% {
		opacity: 0;
		transform: scale(0.5) rotate(calc(var(--entrance-rotate-start, 12deg)))
			translate(
				calc(var(--entrance-translate-x-start, 0px)),
				calc(var(--entrance-translate-y-start, 20px))
			);
		filter: blur(4px);
	}

	40% {
		opacity: var(--opacity-primary);
		transform: scale(1.08) rotate(calc(var(--entrance-rotate-mid, -3deg)))
			translate(
				calc(var(--entrance-translate-x-mid, 0px)),
				calc(var(--entrance-translate-y-mid, -5px))
			);
		filter: blur(1px);
	}

	60% {
		transform: scale(0.96) rotate(calc(var(--entrance-rotate-wiggle, 1deg)))
			translate(
				calc(var(--entrance-translate-x-wiggle, 0px)),
				calc(var(--entrance-translate-y-wiggle, 2px))
			);
		filter: blur(0);
	}

	80% {
		transform: scale(1.02) rotate(calc(var(--entrance-rotate-settle, -0.5deg)))
			translate(
				calc(var(--entrance-translate-x-settle, 0px)),
				calc(var(--entrance-translate-y-settle, -1px))
			);
	}

	100% {
		opacity: 1;
		transform: scale(1) rotate(0deg) translate(0, 0);
		filter: blur(0);
	}
}

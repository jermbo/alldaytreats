---
import { getCollection } from 'astro:content';

let products = [];
let error = null;

try {
  products = await getCollection('products');
  console.log('Products loaded:', products.length);
} catch (e) {
  error = e.message;
  console.error('Error loading products:', e);
}
---

<html>
<head><title>Test</title></head>
<body>
  <h1>Content Collection Test</h1>
  {error && <p style="color: red;">Error: {error}</p>}
  <p>Products found: {products.length}</p>
  <ul>
    {products.map(p => (
      <li>{p.data.name} - {p.data.category}</li>
    ))}
  </ul>
</body>
</html>
